{
  "hash": "bcf88e85f21af2437a2d379d0d70e89c",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: Species Abundance, Biovolume, and Community Data\n---\n\n\n\n\n## Summary\n\n::: {#90d1730c .cell execution_count=1}\n``` {.python .cell-code}\nimport os\nfrom pathlib import Path\n\nimport polars as pl\n\nuri = f'postgresql://{os.getenv(\"POSTGRES_USER\")}:{os.getenv(\"POSTGRES_PASSWORD\")}@{os.getenv(\"POSTGRES_HOST\")}:{os.getenv(\"POSTGRES_PORT\")}/{os.getenv(\"POSTGRES_DATABASE\")}'\n\nsql = Path(\"../../static/sql/sp-abund-biovol-comm.sql\").read_text()\n\nsql = f\"\"\"\n    select\n        area_id, location_id, extract(year from sample_date), count(*) as nrows\n    from\n        (\n            {sql}\n        ) as q\n    group by\n        area_id, location_id, extract(year from sample_date)\n\"\"\"\n\ndf = pl.read_database_uri(\n    sql,\n    uri,\n    engine=\"connectorx\",\n)\n\ndf\n```\n\n::: {.cell-output .cell-output-display execution_count=4}\n```{=html}\n<div><style>\n.dataframe > thead > tr,\n.dataframe > tbody > tr {\n  text-align: right;\n  white-space: pre-wrap;\n}\n</style>\n<small>shape: (115, 4)</small><table border=\"1\" class=\"dataframe\"><thead><tr><th>area_id</th><th>location_id</th><th>extract</th><th>nrows</th></tr><tr><td>str</td><td>str</td><td>f64</td><td>i64</td></tr></thead><tbody><tr><td>&quot;Puget Sound: Main Basin&quot;</td><td>&quot;KingCounty_JSUR01&quot;</td><td>2014.0</td><td>765</td></tr><tr><td>&quot;Puget Sound: Main Basin&quot;</td><td>&quot;KingCounty_JSUR01&quot;</td><td>2015.0</td><td>1276</td></tr><tr><td>&quot;Puget Sound: Main Basin&quot;</td><td>&quot;KingCounty_JSUR01&quot;</td><td>2016.0</td><td>1176</td></tr><tr><td>&quot;Puget Sound: Main Basin&quot;</td><td>&quot;KingCounty_JSUR01&quot;</td><td>2017.0</td><td>1139</td></tr><tr><td>&quot;Puget Sound: Main Basin&quot;</td><td>&quot;KingCounty_JSUR01&quot;</td><td>2018.0</td><td>1027</td></tr><tr><td>&hellip;</td><td>&hellip;</td><td>&hellip;</td><td>&hellip;</td></tr><tr><td>&quot;Puget Sound: Main Basin&quot;</td><td>&quot;KingCounty_NSEX01&quot;</td><td>2019.0</td><td>1088</td></tr><tr><td>&quot;Puget Sound: Main Basin&quot;</td><td>&quot;KingCounty_NSEX01&quot;</td><td>2020.0</td><td>933</td></tr><tr><td>&quot;Puget Sound: Main Basin&quot;</td><td>&quot;KingCounty_NSEX01&quot;</td><td>2021.0</td><td>1235</td></tr><tr><td>&quot;Puget Sound: Main Basin&quot;</td><td>&quot;KingCounty_NSEX01&quot;</td><td>2022.0</td><td>1429</td></tr><tr><td>&quot;Puget Sound: Main Basin&quot;</td><td>&quot;KingCounty_NSEX01&quot;</td><td>2023.0</td><td>1229</td></tr></tbody></table></div>\n```\n:::\n:::\n\n\n",
    "supporting": [
      "sp-abund-biovol-data_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}
